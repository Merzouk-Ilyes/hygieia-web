<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- BOOTSTRAP -->
    <script src="https://code.jquery.com/jquery-1.10.2.js"></script>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="/css/static/static.css" />
    <title>Statistique</title>
</head>
<style>
    .name {
        color: #000;
    margin-right: 40px;
    margin-left: 10px;
    margin-top: .3rem;
           }
   .notif-title {
       font-size:13px;
       color : #01559c;
   }
   .notif-desc {
       font-size:11px;
       
   }
   .notif-date {
       font-size:11px;
       color : #01559c;
   }
   .txt{
   background-color:red;
   font-size:xx-small;
   position: absolute;
   padding:2px;
   top: 1px;
   left: 1px;
   height: 20px;
   width: 20px;
   border-radius: 50%;
 }
 .toastStyle {
   font-size:12px;
   width: 400px;
 }
   button {
     border: none;
   }
   
   .vertical-nav {
           box-shadow: 5px 0 5px -5px grey;
 
     
     height : 1000px;
            margin-top: 0px;
       min-width: 17rem;
       width: 17rem;
       position: fixed;
       top: 0;      
       left: 0;
   
       transition: all 0.4s;
     }
     .page-content {
       margin-left: 17rem;
       height: 100%;
       transition: all 0.4s;
     } 
   input, button, submit { border:none; } 
 
   #sidebar.active {
     margin-left: -17rem;
   }
   
   #content.active {
     width: 100%;
     margin: 0;
   }
   .dropbtn {
 
 color: white;
 padding: 0px;
 font-size: 16px;
 border: none;
 background-color: inherit;
 }
 
 /* The container <div> - needed to position the dropdown content */
 .dropdown {
 position: relative;
 
 }
 
 /* Dropdown Content (Hidden by Default) */
 .dropdown-content {
 display: none;
 position: absolute;
 right: 13px;
 background-color: #f1f1f1;
 width: 290px;
 box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
 z-index: 2;
 }
 
 /* Links inside the dropdown */
 .dropdown-content a {
 color: black;
 padding: 12px 16px;
 text-decoration: none;
 display: block;
 font-size: 10px;
 }
 .show {display:block;}
 
 /* Change color of dropdown links on hover */
 .dropdown-content a:hover {background-color: #ddd;}
 

   .btn-nav {
   
     display: flex; 
     align-self: flex-start;
     
   }
   
   .spa {
     margin-left: 17em;
   }
   .text-uppercase {
     letter-spacing: 0.1em;
   }
   .text-gray {
     color: #aaa;
   }
   .nav-link{
       text-transform: capitalize;
   }
   .nav-link:hover{
       background:#f3f2f2;
   }
   .text-primary{
       color:#7579e7 !important;
   }
   @media (max-width: 768px) {
     #sidebar {
       margin-left: -17rem;
     }
     #sidebar.active {
       margin-left: 0;
       margin-top: 20px;
     }
     #content {
       width: 100%;
       margin: 0;
     }
     #content.active {
       margin-left: 17rem;
       width: calc(100% - 17rem);
     }
   }
 
   .row-h {
     padding: 20px 30px;
     display: flex;
     flex-direction: row;
   }
   .top .searchItems .field  {
 height: 27px;
 
 display: flex;
 justify-content: space-between;
 align-items: center;
 padding: 5px 10px;
 width: 300px;
 border-radius: 6px;
 box-shadow: 1px 1px 1px 1px #70707036;
 
 }
 tr:first-child {
       background-color: #F5F5F5;
       font-size: 16px;
       font-family: "Poppins";
  font-weight: normal;
  border-bottom: 0.1px solid rgba(0, 0, 0, 0.1);
 
   }
   td, th {
     border: none;
     text-align: left;
     padding: 7px;
  
   }
 
   th:first-child {
       border-top-left-radius: 10px;
   }
   th:last-child {
     border-top-right-radius: 10px;
   }
 
   table tr td img {
       border-radius: 8px;
       height: 50px;
       width: 50px;
       padding-left: 8px;
   }
 select {
     box-shadow: 1px 1px 1px 1px #70707036;
     -webkit-appearance: none;
     -moz-appearance: none;
     background: transparent;
     background-image: url("data:image/svg+xml;utf8,<svg fill='white' height='24' viewBox='0 0 24 24' width='24' xmlns='http://www.w3.org/2000/svg'><path d='M7 10l5 5 5-5z'/><path d='M0 0h24v24H0z' fill='none'/></svg>");
     background-repeat: no-repeat;
     background-position-x: 100%;
     background-position-y: 5px;
     border: 1px solid #dfdfdf;
     border-radius: 2px;
     margin-left: 1rem;
 
     padding-right: 5rem;
     background-color: #01559C;
     width: 220px;
     color: white;
     height: 37px;
     border-radius: 5px;
     border: none;
     font-family: "Poppins";
     font-weight: bold;
     font-size: 15px;
     text-indent: 4px;
 
     padding: 5px;
 
   }
   .searchItems {
     display: flex;
     grid-auto-flow: row;
 }
 
 .top .searchItems .dropdown {
     background-color: #01559C;
     color:white;
     border-radius: 6px;
     height: 38px;
     width: 148px;
 
     margin-left: 10px;
     font-family: 'Poppins';
     font-size: 13px;
     position: relative;
     
 }
 .top .searchItems .dropdown:hover .dropdown-list {
     opacity: 1;
     visibility: visible;
 }
 .top .searchItems .dropdown .dropdown-select {
     display: flex;
     justify-content: space-between;
     align-items:center;
     padding: 0.58rem 1rem;
     cursor: pointer;
 }
 .top .searchItems .dropdown .dropdown-list {    
 border-radius: 8px;
 background-color: #01559C;
 align-items:center;
 padding: 0.37rem 1rem;
 position: absolute;
 top: 110%;
 left: 0;
 right: 0;
 opacity: 0;
 visibility: hidden;
 transition: opacity 0.2s linear, visibility 0.2s linear;
 }
 .top .searchItems .field  {
 height: 27px;
 
 display: flex;
 justify-content: space-between;
 align-items: center;
 padding: 5px 10px;
 width: 300px;
 border-radius: 6px;
 box-shadow: 1px 1px 1px 1px #70707036;
 
 }
 
   </style>
 
<body>

    <div class='headdiv'>
        <img src="/assets/logo.png" height="50px" width="100px" style="margin-left: 20px;margin-top:10px"/>
        <div style="display: flex;
        flex-direction: row;
        margin-left: auto;
        margin-top: auto;
        margin-bottom: auto;
        margin-right: 20px;">
            <div class="square"><%= user.Lastname.substring(0,2) %></div>
            <div class="name"><%= user.Firstname %></div>
            <div style="margin-top: auto;margin-bottom: auto;">
                <img  src="/assets/iconsDrawer/disconnect.svg" id="cnx" height="20px" width="20px" onclick="window.location.href='/users/logout'"/>
            </div>
        </div>
    </div>

    <div class="first-container">
        <!-- Statistique des etudiants -->
        <div class="stat">
            <div class="info-rowgrand">
                <div class="titre" id="titrestatetu">Statistique des etudiants</div>
                <div class="divfiltre">
                    <select name="etu" id="etu" class="filtre" onchange="patient()">
                        <option value="1CP" id="1CP">1CP</option>
                        <option value="2CP">2CP</option>
                        <option value="1CS">1CS</option>
                        <option value="2CS">2CS</option>
                        <option value="3CS">3CS</option>
                        <option value="tous" selected>TOUS</option>
                    </select>
                </div>
                <div class="info-colgrand">
                    <div class="courbe">
                        <canvas id="pat" height="10rem" width="10rem"></canvas>
                    </div>
                    <div class="info-row">
                        <div class="info-col">
                            <div class="carreblue"></div>
                            <label class="text">Homme</label>
                            <div>
                                <label class="text" id="path">
                                    <%= path[0].path %> etudiants
                                </label><br>
                                <label class="text blue" id="path%">
                                    <% if(pat[0].pat !=0){ %>
                                        <%= Number.parseFloat(path[0].path*100/pat[0].pat).toFixed(2) %>
                                            <%}else{%>
                                                <%= path[0].path %>
                                                    <%} %>%
                                </label>
                            </div>
                        </div>
                        <div class="info-col">
                            <div class="carrerose"></div>
                            <label class="text">Femme</label>
                            <div>
                                <label class="text" id="patf">
                                    <%= pat[0].pat-path[0].path %> etudiants
                                </label><br>
                                <label class="text rose" id="patf%">
                                    <% if(pat[0].pat !=0){ %>
                                        <%= Number.parseFloat((pat[0].pat-path[0].path)*100/pat[0].pat).toFixed(2) %>
                                            <%}else{%>
                                                <%= path[0].path %>
                                                    <%} %>%
                                </label>
                            </div>
                        </div>
                        <div class="info-total">
                            <label class="text gris">total : </label><label class="text" id="patt">
                                <%= pat[0].pat %> etudiants
                            </label>
                        </div>
                    </div>

                </div>
            </div>
        </div>
        <!-- Statistique des patients -->
        <div class="stat">
            <div class="info-rowgrand">
                <div class="titre" id="titrepat">Statistique des patients</div>
                <div class="divfiltre">
                    <select name="patient" id="patient" class="filtre" onchange="patientfiltre()">
                        <option value="Etudiant">Etudiant</option>
                        <option value="Ats">ATS</option>
                        <option value="Professeur">Professeur</option>
                        <option value="tous" selected>TOUS</option>
                    </select>
                </div>
                <div class="info-colgrand">
                    <div class="courbe">
                        <canvas id="patcp" height="10rem" width="10rem"></canvas>
                    </div>
                    <div class="info-row">
                        <div class="info-col">
                            <div class="carreblue"></div>
                            <label class="text">Homme</label>
                            <div>
                                <label class="text" id="patienth">
                                    <%= patcph[0].patcph %> patients
                                </label><br>
                                <label class="text blue"  id="patienth%">
                                    <% if(patcp[0].patcp !=0){%>
                                        <%= Number.parseFloat(patcph[0].patcph*100/patcp[0].patcp).toFixed(2) %>
                                            <% }else{ %>
                                                <%= patcp[0].patcp %>
                                                    <% } %>%
                                </label>
                            </div>
                        </div>
                        <div class="info-col">
                            <div class="carrerose"></div>
                            <label class="text">Femme</label>
                            <div>
                                <label class="text"  id="patientf">
                                    <% if(patcp[0].patcp !=0){ %>
                                        <%= patcp[0].patcp-patcph[0].patcph %>
                                            <% }else{ %>
                                                <%= patcp[0].patcp %>
                                                    <%} %> patients
                                </label><br>
                                <label class="text rose"  id="patientf%">
                                    <% if(patcp[0].patcp !=0){ %>
                                        <%= ((patcp[0].patcp-patcph[0].patcph)*100/patcp[0].patcp).toFixed(2) %>
                                            <% }else{ %>
                                                <%= patcp[0].patcp %>
                                                    <%} %>%
                                </label>
                            </div>
                        </div>
                        <div class="info-total">
                            <label class="text gris">total : </label><label class="text"  id="patientt">
                                <%= patcp[0].patcp %> patients
                            </label>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Statistique des patients fumeurs -->
        <div class="stat">
            <div class="info-rowgrand">
                <div class="titre" id="titrefum">Statistique des patients fumeurs</div>
                <div class="divfiltre">
                    <select name="fum" id="fum" class="filtre" onchange="fumeurfiltre()">
                        <option value="fumeur" selected>Fumeur</option>
                        <option value="chiqueur">Chiqueur</option>
                        <option value="toxicomane">Toxicomane</option>
                        <option value="ancien" >Ancien fumeur</option>
                        <option value="alcoolique" >Alcoolique</option>
                    </select>
                </div>
                <div class="info-colgrand">
                    <div class="courbe">
                        <canvas id="myChart" height="10rem" width="10rem"></canvas>
                    </div>
                    <div class="info-row">
                        <div class="info-col">
                            <div class="carreblue"></div>
                            <label class="text" id="fuml">fumeur</label>
                            <div>
                                <label class="text" id="fumc">
                                    <%= smoke[0].smoke %> patients
                                </label><br>
                                <label class="text blue" id="fumc%">
                                    <% if(data[0].data !=0){ %>
                                        <%= Number.parseFloat(smoke[0].smoke*100/data[0].data).toFixed(2) %>
                                            <%}else{%>
                                                <%= smoke[0].smoke %>
                                                    <%} %>%
                                </label>
                            </div>
                        </div>
                        <div class="info-col">
                            <div class="carregris"></div>
                            <label class="text" id="nofum">non fumeur</label>
                            <div>
                                <label class="text" id="nofumc">
                                    <%= data[0].data-smoke[0].smoke %> patients
                                </label><br>
                                <label class="text gris" id="nofumc%">
                                    <% if(data[0].data !=0){ %>
                                        <%= Number.parseFloat((data[0].data-smoke[0].smoke)*100/data[0].data).toFixed(2)
                                            %>
                                            <%}else{%>
                                                <%= smoke[0].smoke %>
                                                    <%} %>%
                                </label>
                            </div>
                        </div>
                        <div class="info-total">
                            <label class="text gris">total : </label><label class="text" id="fumt">
                                <%= data[0].data %> patients
                            </label>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Statistique des evacuations -->
        <div class="stat">
            <div class="info-rowgrand">
                <div class="titre">Statistique des evacuations 
                </div>
                    <div class="center">
                        Du : <input type="date" name="duev" id="duev" value="du" class="dateinput">
                           Au : <input type="date" name="auev" id="auev" value="au" class="dateinput">
                    </div>
                    <div class="divfiltre">
                        <button onclick="clickevacuation()" class="btn">Filtre</button>
                    </div>
                <div class="info-colgrand">
                    <div class="courbe">
                        <canvas id="evacuation" height="10rem" width="10rem"></canvas>
                    </div>
                    <div class="info-row">
                        <div class="info-col">
                            <div class="carreblue"></div>
                            <label class="text">Homme</label>
                            <div>
                                <label class="text" id="evh">
                                    <%= evacuation[0].nombre %> patients
                                </label><br>
                                <label class="text blue" id="evh%">
                                    <% if(totalevacuation[0].total !=0){ %>
                                        <%= Number.parseFloat(evacuation[0].nombre*100/totalevacuation[0].total).toFixed(2)
                                            %>
                                            <%}else{%>
                                                <%= evacuation[0].nombre %>
                                                    <%} %>%
                                </label>
                            </div>
                        </div>
                        <div class="info-col">
                            <div class="carrerose"></div>
                            <label class="text">Femme</label>
                            <div>
                                <label class="text" id="evf">
                                    <% if(totalevacuation[0].total !=0){ %>
                                        <%= totalevacuation[0].total-evacuation[0].nombre %>
                                            <%}else{%>
                                                <%= evacuation[0].nombre %>
                                                    <%} %> patients
                                </label><br>
                                <label class="text rose" id="evf%">
                                    <% if(totalevacuation[0].total !=0){ %>
                                        <%= Number.parseFloat((totalevacuation[0].total-evacuation[0].nombre)*100/totalevacuation[0].total).toFixed(2)
                                            %>
                                            <%}else{%>
                                                <%= evacuation[0].nombre %>
                                                    <%} %>%
                                </label>
                            </div>
                        </div>
                        <div class="info-total">
                            <label class="text gris">total : </label><label class="text" id="evt">
                                <%= totalevacuation[0].total %> patients
                            </label>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Statistique des RDV reguliere -->
        <div class="stat">
            <div class="info-rowgrand">
                <div class="titre">Statistique des RDV reguliere 
                </div>
                <div class="center">
                    Du : <input type="date" name="dure" id="dure" value="du" class="dateinput">
                    Au : <input type="date" name="aure" id="aure" value="au" class="dateinput">
                </div>
                <div class="divfiltre">
                    <button onclick="clickregulier()" class="btn">Filtre</button>
                </div>
                <div class="info-colgrand">
                    <div class="courbe">
                        <canvas id="rdvre" height="10rem" width="10rem"></canvas>
                    </div>
                    <div class="info-row">
                        <div class="info-col">
                            <div class="carreblue"></div>
                            <label class="text">Homme</label>
                            <div>
                                <label class="text" id="reh">
                                    <%= rdvreguliereh[0].rdvreguliere %> patients
                                </label><br>
                                <label class="text blue" id="reh%">
                                    <% if(rdvreguliere[0].rdvreguliere !=0){ %>
                                        <%= Number.parseFloat(rdvreguliereh[0].rdvreguliere*100/(rdvreguliere[0].rdvreguliere)).toFixed(2)
                                            %>
                                            <%}else{%>
                                                <%= rdvreguliere[0].rdvreguliere %>
                                                    <%} %>%
                                </label>
                            </div>
                        </div>
                        <div class="info-col">
                            <div class="carrerose"></div>
                            <label class="text">femme</label>
                            <div>
                                <label class="text" id="ref">
                                    <% if(rdvreguliere[0].rdvreguliere !=0){ %>
                                        <%= rdvreguliere[0].rdvreguliere - rdvreguliereh[0].rdvreguliere %>
                                            <%}else{%>
                                                <%= rdvreguliere[0].rdvreguliere %>
                                                    <%} %> patients
                                </label><br>
                                <label class="text rose" id="ref%">
                                    <% if(rdvreguliere[0].rdvreguliere !=0){ %>
                                        <%= Number.parseFloat((rdvreguliere[0].rdvreguliere -
                                            rdvreguliereh[0].rdvreguliere)*100/(rdvreguliere[0].rdvreguliere)).toFixed(2)
                                            %>
                                            <%}else{%>
                                                <%= rdvreguliere[0].rdvreguliere %>
                                                    <%} %>%
                                </label>
                            </div>
                        </div>
                        <div class="info-total">
                            <label class="text gris" >total : </label><label class="text" id="ret">
                                <%= rdvreguliere[0].rdvreguliere %> patients
                            </label>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Statistique des RDV irreguliere -->
        <div class="stat">
            <div class="info-rowgrand">
                <div class="titre">Statistique des RDV irreguliers
                </div>
                <div class="center">
                    Du : <input type="date" name="duirre" id="duirre" value="du" class="dateinput">
                    Au : <input type="date" name="auirre" id="auirre" value="au" class="dateinput">
                </div>
                <div class="divfiltre">
                    <button onclick="clickirregulier()" class="btn">Filtre</button>
                </div>
                <div class="info-colgrand">
                    <div class="courbe">
                        <canvas id="rdvirre" height="10rem" width="10rem"></canvas>
                    </div>
                    <div class="info-row">
                        <div class="info-col">
                            <div class="carreblue"></div>
                            <label class="text">Homme</label>
                            <div>
                                <label class="text" id="irreh">
                                    <%= rdvirreguliereh[0].rdvirreguliere %> patients
                                </label><br>
                                <label class="text blue" id="irreh%">
                                    <% if(rdvirreguliere[0].rdvirreguliere !=0){ %>
                                        <%= Number.parseFloat(
                                            rdvirreguliereh[0].rdvirreguliere*100/(rdvirreguliere[0].rdvirreguliere)
                                            ).toFixed(2) %>
                                            <%}else{%>
                                                <%= rdvirreguliere[0].rdvirreguliere %>
                                                    <%} %>%
                                </label>
                            </div>
                        </div>
                        <div class="info-col">
                            <div class="carrerose"></div>
                            <label class="text">femme</label>
                            <div>
                                <label class="text" id="irref">
                                    <% if(rdvirreguliere[0].rdvirreguliere !=0){ %>
                                        <%= rdvirreguliere[0].rdvirreguliere - rdvirreguliereh[0].rdvirreguliere %>
                                            <%}else{%>
                                                <%= rdvirreguliere[0].rdvirreguliere %>
                                                    <%} %> patients
                                </label><br>
                                <label class="text rose" id="irref%">
                                    <% if(rdvirreguliere[0].rdvirreguliere !=0){ %>
                                        <%= Number.parseFloat((rdvirreguliere[0].rdvirreguliere -
                                            rdvirreguliereh[0].rdvirreguliere)*100/(rdvirreguliere[0].rdvirreguliere)
                                            ).toFixed(2) %>
                                            <%}else{%>
                                                <%= rdvirreguliere[0].rdvirreguliere %>
                                                    <%} %>%
                                </label>
                            </div>
                        </div>
                        <div class="info-total">
                            <label class="text gris">total : </label><label class="text" id="irret">
                                <%= rdvirreguliere[0].rdvirreguliere %> patients
                            </label>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Statistique des examens medicaux des nouveaux etudiants -->
        <div class="stat">
            <div class="info-rowgrand">
                <div class="titre">Statistique des examens medicaux des nouveaux etudiants </div>
                <div class="info-colgrand">
                    <div class="courbe">
                        <canvas id="cp" height="10rem" width="10rem"></canvas>
                    </div>
                    <div class="info-row">
                        <div class="info-col">
                            <div class="carreblue"></div>
                            <label class="text">Homme</label>
                            <div>
                                <label class="text">
                                    <%= cp[0].cp %> etudiants
                                </label><br>
                                <label class="text blue">
                                    <% if(cpt[0].cpt !=0){ %>
                                        <%= Number.parseFloat(cp[0].cp*100/cpt[0].cpt).toFixed(2) %>
                                            <%}else{%>
                                                <%= cpt[0].cpt %>
                                                    <%} %>%
                                </label>
                            </div>
                        </div>
                        <div class="info-col">
                            <div class="carrerose"></div>
                            <label class="text">Femme</label>
                            <div>
                                <label class="text">
                                    <% if(cpt[0].cpt !=0){ %>
                                        <%= cpt[0].cpt-cp[0].cp %>
                                            <%}else{%>
                                                <%= cpt[0].cpt %>
                                                    <%} %> etudiants
                                </label><br>
                                <label class="text rose">
                                    <% if(cpt[0].cpt !=0){ %>
                                        <%= Number.parseFloat((cpt[0].cpt-cp[0].cp)*100/cpt[0].cpt ).toFixed(2) %>
                                            <%}else{%>
                                                <%= cpt[0].cpt %>
                                                    <%} %>%
                                </label>
                            </div>
                        </div>
                        <div class="info-total">
                            <label class="text gris">total : </label><label class="text">
                                <%= cpt[0].cpt %> etudiants
                            </label>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Statistique des indices de masse corporel -->
        <div class="stat">
            <div class="info-rowgrand">
                <div class="titre">Statistique des indices de masse corporel</div>
                <div class="info-colgrand">
                    <div class="courbe">
                        <canvas id="ndab" height="10rem" width="10rem"></canvas>
                    </div>
                    <div class="info-row">
                        <div class="info-col">
                            <div class="carreblue"></div>
                            <label class="text">Insuffisante ponderale</label>
                            <div>
                                <label class="text">
                                    <%= rgig[0].rgig %> patients
                                </label><br>
                                <label class="text blue">
                                    <%= Number.parseFloat(rgig[0].rgig*100/(rgig[0].rgig + nrml[0].nrml +
                                        suppoid[0].suppoid + smin[0].smin )).toFixed(2) %>%
                                </label>
                            </div>
                        </div>
                        <div class="info-col">
                            <div class="carrevert"></div>
                            <label class="text">Corpulance normale</label>
                            <div>
                                <label class="text">
                                    <%= nrml[0].nrml%> patients
                                </label><br>
                                <label class="text vert">
                                    <%= Number.parseFloat((nrml[0].nrml)*100/(rgig[0].rgig + nrml[0].nrml +
                                        suppoid[0].suppoid + smin[0].smin )).toFixed(2) %>%
                                </label>
                            </div>
                        </div>
                        <div class="info-col">
                            <div class="carrejaune"></div>
                            <label class="text">Surpoids</label>
                            <div>
                                <label class="text">
                                    <%= suppoid[0].suppoid %> patients
                                </label><br>
                                <label class="text jaune">
                                    <%= Number.parseFloat(suppoid[0].suppoid*100/(rgig[0].rgig + nrml[0].nrml +
                                        suppoid[0].suppoid + smin[0].smin )).toFixed(2) %>%
                                </label>
                            </div>
                        </div>
                        <div class="info-col">
                            <div class="carrerouge"></div>
                            <label class="text">Obesite</label>
                            <div>
                                <label class="text">
                                    <%= smin[0].smin %> patients
                                </label><br>
                                <label class="text rouge">
                                    <%= Number.parseFloat(smin[0].smin*100/(rgig[0].rgig + nrml[0].nrml +
                                        suppoid[0].suppoid + smin[0].smin )).toFixed(2) %>%
                                </label>
                            </div>
                        </div>
                        <div class="info-total">
                            <label class="text gris">total : </label><label class="text">
                                <%= (rgig[0].rgig + nrml[0].nrml + suppoid[0].suppoid + smin[0].smin ) %> patients
                            </label>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Statistique des maladies chroniques -->
        <div class="stat">
            <div class="info-rowgrand">
                <div class="titre">Statistique des maladies chroniques </div>
                <div class="info-colgrand">
                    <div class="courbebar">
                        <canvas id="chro" height='282px' width='1000px'></canvas>
                    </div>
                </div>
                <div id="divchro">

                </div>
            </div>
        </div>
        <!-- Statistique des maladies cardio -->
        <div class="stat">
            <div class="info-rowgrand">
                <div class="titre">Statistique des maladies cardio-vasculaire </div>
                <div class="info-colgrand">
                    <div class="courbebar">
                        <canvas id="cardio" height='282px' width='1056px'></canvas>
                    </div>
                </div>
                <div id="divcardio">

                </div>
            </div>
        </div>
        <!-- Statistique des maladies infectieuses -->
        <div class="stat">
            <div class="info-rowgrand">
                <div class="titre">Statistique des maladies infectieuses </div>
                <div class="info-colgrand">
                    <div class="courbebar">
                        <canvas id="infectieuse" height='282px' width='1056px'></canvas>
                    </div>
                </div>
                <div id="divinfectieuse">

                </div>
            </div>
        </div>
        <!-- Statistique des maladies rhumatologiques -->
        <div class="stat">
            <div class="info-rowgrand">
                <div class="titre">Statistique des maladies rhumatologiques </div>
                <div class="info-colgrand">
                    <div class="courbebar">
                        <canvas id="rhumatologique" height='282px' width='1056px'></canvas>
                    </div>
                </div>
                <div id="divrhumatologique">

                </div>
            </div>
        </div>
        <!-- Statistique des maladies digestives -->
        <div class="stat">
            <div class="info-rowgrand">
                <div class="titre">Statistique des maladies digestives </div>
                <div class="info-colgrand">
                    <div class="courbebar">
                        <canvas id="digestive" height='282px' width='1056px'></canvas>
                    </div>
                </div>
                <div id="divdigestive">

                </div>
            </div>
        </div>

        <!-- Statistique des autres maladies -->
        <div class="stat">
            <div class="info-rowgrand">
                <div class="titre">Statistique des autres maladies </div>
                <div class="info-colgrand">
                    <div class="courbebar">
                        <canvas id="maladie" height='282px' width='1056px'></canvas>
                    </div>
                </div>
                <div id="divmaladie">

                </div>
            </div>
        </div>

    </div>
</body>
<script>


    const pat = '<%= pat[0].pat %>';
    const path = '<%= path[0].path %>';
    var patf = pat - path;
    var pat1 = document.getElementById('pat').getContext('2d');
    var pat2 = new Chart(pat1, {
        type: 'pie',
        data: {
            datasets: [{
                label: 'Statistique des fumeurs',
                data: [path, patf],
                backgroundColor: [
                    '#004FD6',
                    '#ff02c0',
                ],
                borderColor: [
                    '#004FD6',
                    '#ff02c0',
                ],
            }]
        },
    });

    const patcp = '<%= patcp[0].patcp %>';
    const patcph = '<%= patcph[0].patcph %>';
    var patcpf = patcp - patcph;
    var patcp1 = document.getElementById('patcp').getContext('2d');
    var patcp2 = new Chart(patcp1, {
        type: 'pie',
        data: {
            datasets: [{
                label: 'Statistique des etudiants',
                data: [patcph, patcpf],
                backgroundColor: [
                    '#004FD6',
                    '#ff02c0',
                ],
                borderColor: [
                    '#004FD6',
                    '#ff02c0',
                ],
            }]
        },

    });

    const total = '<%= data[0].data %>';
    const smoke = '<%= smoke[0].smoke %>';
    var nosmoke = total - smoke;
    var ctx = document.getElementById('myChart').getContext('2d');
    var myChart = new Chart(ctx, {
        type: 'pie',
        data: {
            //labels: ['fumeur', 'non fumeur'],
            datasets: [{
                label: 'Statistique des fumeurs',
                data: [smoke, nosmoke],
                backgroundColor: [
                    '#004FD6',
                    '#C7BEBE',
                ],
                borderColor: [
                    '#004FD6',
                    '#C7BEBE',
                ],
            }]
        },

    });

    const totalev = '<%= totalevacuation[0].total %>';
    const ev = '<%= evacuation[0].nombre %>';
    var noev = totalev - ev;
    var e1 = document.getElementById('evacuation').getContext('2d');
    var e2 = new Chart(e1, {
        type: 'pie',
        data: {
            datasets: [{
                label: 'Statistique des evacuation',
                data: [ev, noev],
                backgroundColor: [
                    '#004FD6',
                    '#ff02c0',
                ],
                borderColor: [
                    '#004FD6',
                    '#ff02c0',
                ],
            }]
        },

    });

    const rdvre = '<%= rdvreguliere[0].rdvreguliere %>';
    const rdvreh = '<%= rdvreguliereh[0].rdvreguliere %>';
    const rdvref = rdvre - rdvreh
    var rdvre1 = document.getElementById('rdvre').getContext('2d');
    var rdvre2 = new Chart(rdvre1, {
        type: 'pie',
        data: {
            //labels: ['fumeur', 'non fumeur'],
            datasets: [{
                label: 'Statistique des rdv regulier',
                data: [rdvreh, rdvref],
                backgroundColor: [
                    '#004FD6',
                    '#ff02c0',
                ],
                borderColor: [
                    '#004FD6',
                    '#ff02c0',
                ],
            }]
        },

    });

    const rdvirre = '<%= rdvirreguliere[0].rdvirreguliere %>';
    const rdvirreh = '<%= rdvirreguliereh[0].rdvirreguliere %>';
    const rdvirref = rdvirre - rdvirreh
    var rdvirre1 = document.getElementById('rdvirre').getContext('2d');
    var rdvirre2 = new Chart(rdvirre1, {
        type: 'pie',
        data: {
            //labels: ['fumeur', 'non fumeur'],
            datasets: [{
                label: 'Statistique des rdv irregulier',
                data: [rdvirreh, rdvirref],
                backgroundColor: [
                    '#004FD6',
                    '#ff02c0',
                ],
                borderColor: [
                    '#004FD6',
                    '#ff02c0',
                ],
            }]
        },

    });

    const cpt = '<%= cpt[0].cpt %>';
    const cp = '<%= cp[0].cp %>';
    var cpf = cpt - cp;
    var cp1 = document.getElementById('cp').getContext('2d');
    var cp2 = new Chart(cp1, {
        type: 'pie',
        data: {
            //labels: ['fumeur', 'non fumeur'],
            datasets: [{
                label: 'Statistique des etudiants',
                data: [cp, cpf],
                backgroundColor: [
                    '#004FD6',
                    '#ff02c0',
                ],
                borderColor: [
                    '#004FD6',
                    '#ff02c0',
                ],
            }]
        },

    });


    const rgig = '<%= rgig[0].rgig %>';
    const nrml = '<%= nrml[0].nrml %>';
    const suppoid = '<%= suppoid[0].suppoid %>';
    const smin = '<%= smin[0].smin %>';
    var ndab1 = document.getElementById('ndab').getContext('2d');
    var ndab2 = new Chart(ndab1, {
        type: 'pie',
        data: {
            //labels: ['fumeur', 'non fumeur'],
            datasets: [{
                label: 'Statistique des fumeurs',
                data: [rgig, nrml, suppoid, smin],
                backgroundColor: [
                    '#004FD6',
                    '#00a529',
                    '#fbff22',
                    '#b40000',
                ],
                borderColor: [
                    '#004FD6',
                    '#00a529',
                    '#fbff22',
                    '#b40000',
                ],
            }]
        },

    });



    var chronique = JSON.parse('<%- decodeURIComponent(JSON.stringify(chronique)) %>');
    var cardio = JSON.parse('<%- decodeURIComponent(JSON.stringify(cardio))%>');
    var infectieuse = JSON.parse('<%- decodeURIComponent(JSON.stringify(infectieuse))%>');
    var rhumatologique = JSON.parse('<%- decodeURIComponent(JSON.stringify(rhumatologique))%>');
    var digestive = JSON.parse('<%- decodeURIComponent(JSON.stringify(digestive))%>');
    var maladie = JSON.parse('<%- decodeURIComponent(JSON.stringify(maladie))%>');

    var name1 = [];
    var homme1 = [];
    var femme1 = [];
    for (var j = 0; j < chronique.length; j++) {
        const index = name1.indexOf(chronique[j].name);
        if (index == -1) {
            name1.push(chronique[j].name);
            if (chronique[j].sexe.toLowerCase() === 'femme') {
                homme1.push(0);
                femme1.push(chronique[j].occurence);
            }

            if (chronique[j].sexe.toLowerCase() === 'homme') {
                femme1.push(0);
                homme1.push(chronique[j].occurence);
            }
        }
        else {
            if (chronique[j].sexe.toLowerCase() === 'femme') {
                femme1[index] = chronique[j].occurence;
            }

            if (chronique[j].sexe.toLowerCase() === 'homme') {
                homme1[index] = chronique[j].occurence;
            }
        }
    }
    var divchro = document.getElementById('divchro');
    for (var j = 0; j < name1.length; j++) {
        divchro.innerHTML += '<div class="flex"><div class="info-colmal">' +
            '<div class="info-name littlespace"><label class="text name">' + name1[j] + '</label></div>' +
            '<div class="space">' +
            '<div class="info-colmal">' +
            '<div class="carreblue"></div>' +
            '<label class="text">Homme</label>' +
            '<div>' +
            '<label class="text">' + homme1[j] + ' etudiants</label><br>' +
            '<label class="text blue">' + (homme1[j] * 100 / (homme1[j] + femme1[j])).toFixed(2) + '%</label>' +
            '</div>' +
            '</div>' +
            '<div class="info-colmal">' +
            '<div class="carrerose"></div>' +
            '<label class="text">Femme</label>' +
            '<div>' +
            '<label class="text">' + femme1[j] + ' etudiants</label><br>' +
            '<label class="text rose">' + (femme1[j] * 100 / (homme1[j] + femme1[j])).toFixed(2) + '%</label></div>' +
            '</div>' +
            '</div>' +
            '<div class="littlespace">' +
            '<label class="text gris">total : </label><label class="text">' + (homme1[j] + femme1[j]) + ' patients</label></div></div>' +
            '</div>';
        '</div>' +
            '</div>';
    }
    let data = {
        labels: name1,
        datasets: [
            {
                label: 'Hemme',
                data: homme1,
                backgroundColor: "#004FD6",
            },
            {
                label: 'Femme',
                data: femme1,
                backgroundColor: "#ff02c0",
            }
        ]
    };
    var chro1 = document.getElementById('chro').getContext('2d');
    var chro2 = new Chart(chro1, {
        type: 'bar',
        data: data,
    });


    var name2 = [];
    var homme2 = [];
    var femme2 = [];
    for (var j = 0; j < cardio.length; j++) {
        const index = name2.indexOf(cardio[j].name);
        if (index == -1) {
            name2.push(cardio[j].name);
            if (cardio[j].sexe.toLowerCase() === 'femme') {
                homme2.push(0);
                femme2.push(cardio[j].occurence);
            }

            if (cardio[j].sexe.toLowerCase() === 'homme') {
                femme2.push(0);
                homme2.push(cardio[j].occurence);
            }
        }
        else {
            if (cardio[j].sexe.toLowerCase() === 'femme') {
                femme2[index] = cardio[j].occurence;
            }

            if (cardio[j].sexe.toLowerCase() === 'homme') {
                homme2[index] = cardio[j].occurence;
            }
        }
    }
    var divcardio = document.getElementById('divcardio');
    for (var j = 0; j < name2.length; j++) {
        divcardio.innerHTML += '<div class="flex"><div class="info-colmal">' +
            '<div class="info-name littlespace"><label class="text name">' + name2[j] + '</label></div>' +
            '<div class="space">' +
            '<div class="info-colmal">' +
            '<div class="carreblue"></div>' +
            '<label class="text">Homme</label>' +
            '<div>' +
            '<label class="text">' + homme2[j] + ' etudiants</label><br>' +
            '<label class="text blue">' + (homme2[j] * 100 / (homme2[j] + femme2[j])).toFixed(2) + '%</label>' +
            '</div>' +
            '</div>' +
            '<div class="info-colmal">' +
            '<div class="carrerose"></div>' +
            '<label class="text">Femme</label>' +
            '<div>' +
            '<label class="text">' + femme2[j] + ' etudiants</label><br>' +
            '<label class="text rose">' + (femme2[j] * 100 / (homme2[j] + femme2[j])).toFixed(2) + '%</label></div>' +
            '</div>' +
            '</div>' +
            '<div class="littlespace">' +
            '<label class="text gris">total : </label><label class="text">' + (homme2[j] + femme2[j]) + ' patients</label></div></div>' +
            '</div>';
        '</div>' +
            '</div>';
    }
    let data2 = {
        labels: name2,
        datasets: [
            {
                label: 'Hemme',
                data: homme2,
                backgroundColor: "#004FD6"
            },
            {
                label: 'Femme',
                data: femme2,
                backgroundColor: "#ff02c0",
            }
        ]
    };
    var cardio1 = document.getElementById('cardio').getContext('2d');
    var cardio2 = new Chart(cardio1, {
        type: 'bar',
        data: data2,
    });


    var name3 = [];
    var homme3 = [];
    var femme3 = [];
    for (var j = 0; j < infectieuse.length; j++) {
        const index = name3.indexOf(infectieuse[j].name);
        if (index == -1) {
            name3.push(infectieuse[j].name);
            if (infectieuse[j].sexe.toLowerCase() === 'femme') {
                homme3.push(0);
                femme3.push(infectieuse[j].occurence);
            }

            if (infectieuse[j].sexe.toLowerCase() === 'homme') {
                femme3.push(0);
                homme3.push(infectieuse[j].occurence);
            }
        }
        else {
            if (infectieuse[j].sexe.toLowerCase() === 'femme') {
                femme3[index] = infectieuse[j].occurence;
            }

            if (infectieuse[j].sexe.toLowerCase() === 'homme') {
                homme3[index] = infectieuse[j].occurence;
            }
        }
    }
    var divinfectieuse = document.getElementById('divinfectieuse');
    for (var j = 0; j < name3.length; j++) {
        divinfectieuse.innerHTML += '<div class="flex"><div class="info-colmal">' +
            '<div class="info-name littlespace"><label class="text name">' + name3[j] + '</label></div>' +
            '<div class="space">' +
            '<div class="info-colmal">' +
            '<div class="carreblue"></div>' +
            '<label class="text">Homme</label>' +
            '<div>' +
            '<label class="text">' + homme3[j] + ' etudiants</label><br>' +
            '<label class="text blue">' + (homme3[j] * 100 / (homme3[j] + femme3[j])).toFixed(2) + '%</label>' +
            '</div>' +
            '</div>' +
            '<div class="info-colmal">' +
            '<div class="carrerose"></div>' +
            '<label class="text">Femme</label>' +
            '<div>' +
            '<label class="text">' + femme3[j] + ' etudiants</label><br>' +
            '<label class="text rose">' + (femme3[j] * 100 / (homme3[j] + femme3[j])).toFixed(2) + '%</label></div>' +
            '</div>' +
            '</div>' +
            '<div class="littlespace">' +
            '<label class="text gris">total : </label><label class="text">' + (homme3[j] + femme3[j]) + ' patients</label></div></div>' +
            '</div>';
        '</div>' +
            '</div>';
    }
    let data3 = {
        labels: name3,
        datasets: [
            {
                label: 'Hemme',
                data: homme3,
                backgroundColor: "#004FD6"
            },
            {
                label: 'Femme',
                data: femme3,
                backgroundColor: "#ff02c0",
            }
        ]
    };
    var infectieuse1 = document.getElementById('infectieuse').getContext('2d');
    var infectieuse2 = new Chart(infectieuse1, {
        type: 'bar',
        data: data3,
    });

    var name4 = [];
    var homme4 = [];
    var femme4 = [];
    for (var j = 0; j < rhumatologique.length; j++) {
        const index = name4.indexOf(infectieuse[j].name);
        if (index == -1) {
            name4.push(rhumatologique[j].name);
            if (rhumatologique[j].sexe.toLowerCase() === 'femme') {
                homme4.push(0);
                femme4.push(rhumatologique[j].occurence);
            }

            if (rhumatologique[j].sexe.toLowerCase() === 'homme') {
                femme4.push(0);
                homme4.push(rhumatologique[j].occurence);
            }
        }
        else {
            if (rhumatologique[j].sexe.toLowerCase() === 'femme') {
                femme4[index] = rhumatologique[j].occurence;
            }

            if (rhumatologique[j].sexe.toLowerCase() === 'homme') {
                homme4[index] = rhumatologique[j].occurence;
            }
        }
    }
    var divrhumatologique = document.getElementById('divrhumatologique');
    for (var j = 0; j < name4.length; j++) {
        divrhumatologique.innerHTML += '<div class="flex"><div class="info-colmal">' +
            '<div class="info-name littlespace"><label class="text name">' + name4[j] + '</label></div>' +
            '<div class="space">' +
            '<div class="info-colmal">' +
            '<div class="carreblue"></div>' +
            '<label class="text">Homme</label>' +
            '<div>' +
            '<label class="text">' + homme4[j] + ' etudiants</label><br>' +
            '<label class="text blue">' + (homme4[j] * 100 / (homme4[j] + femme4[j])).toFixed(2) + '%</label>' +
            '</div>' +
            '</div>' +
            '<div class="info-colmal">' +
            '<div class="carrerose"></div>' +
            '<label class="text">Femme</label>' +
            '<div>' +
            '<label class="text">' + femme4[j] + ' etudiants</label><br>' +
            '<label class="text rose">' + (femme4[j] * 100 / (homme4[j] + femme4[j])).toFixed(2) + '%</label></div>' +
            '</div>' +
            '</div>' +
            '<div class="littlespace">' +
            '<label class="text gris">total : </label><label class="text">' + (homme4[j] + femme4[j]) + ' patients</label></div></div>' +
            '</div>';
        '</div>' +
            '</div>';
    }
    let data4 = {
        labels: name4,
        datasets: [
            {
                label: 'Hemme',
                data: homme4,
                backgroundColor: "#004FD6"
            },
            {
                label: 'Femme',
                data: femme4,
                backgroundColor: "#ff02c0",
            }
        ]
    };
    for (var j = 0; j < name4.length; j++) {
        divchro.innerHTML += '<div class="flex"><div class="info-colmal">' +
            '<div class="info-name littlespace"><label class="text name">' + name4[j] + '</label></div>' +
            '<div class="space">' +
            '<div class="info-colmal">' +
            '<div class="carreblue"></div>' +
            '<label class="text">Homme</label>' +
            '<div>' +
            '<label class="text">' + homme4[j] + ' etudiants</label><br>' +
            '<label class="text blue">' + (homme4[j] * 100 / (homme4[j] + femme4[j])).toFixed(2) + '%</label>' +
            '</div>' +
            '</div>' +
            '<div class="info-colmal">' +
            '<div class="carrerose"></div>' +
            '<label class="text">Femme</label>' +
            '<div>' +
            '<label class="text">' + femme4[j] + ' etudiants</label><br>' +
            '<label class="text rose">' + (femme4[j] * 100 / (homme4[j] + femme4[j])).toFixed(2) + '%</label></div>' +
            '</div>' +
            '</div>' +
            '<div class="littlespace">' +
            '<label class="text gris">total : </label><label class="text">' + (homme3[j] + femme3[j]) + ' patients</label></div></div>' +
            '</div>';
        '</div>' +
            '</div>';
    }
    var rhumatologique1 = document.getElementById('rhumatologique').getContext('2d');
    var rhumatologique1 = new Chart(rhumatologique1, {
        type: 'bar',
        data: data4,
    });

    var name5 = [];
    var homme5 = [];
    var femme5 = [];
    for (var j = 0; j < digestive.length; j++) {
        const index = name5.indexOf(digestive[j].name);
        if (index == -1) {
            name5.push(digestive[j].name);
            if (digestive[j].sexe.toLowerCase() === 'femme') {
                homme5.push(0);
                femme5.push(digestive[j].occurence);
            }

            if (digestive[j].sexe.toLowerCase() === 'homme') {
                femme5.push(0);
                homme5.push(digestive[j].occurence);
            }
        }
        else {
            if (digestive[j].sexe.toLowerCase() === 'femme') {
                femme5[index] = digestive[j].occurence;
            }

            if (digestive[j].sexe.toLowerCase() === 'homme') {
                homme5[index] = digestive[j].occurence;
            }
        }
    }
    let data5 = {
        labels: name5,
        datasets: [
            {
                label: 'Hemme',
                data: homme5,
                backgroundColor: "#004FD6"
            },
            {
                label: 'Femme',
                data: femme5,
                backgroundColor: "#ff02c0",
            }
        ]
    };
    var divdigestive = document.getElementById('divdigestive');
    for (var j = 0; j < name5.length; j++) {
        divdigestive.innerHTML += '<div class="flex"><div class="info-colmal">' +
            '<div class="info-name littlespace"><label class="text name">' + name5[j] + '</label></div>' +
            '<div class="space">' +
            '<div class="info-colmal">' +
            '<div class="carreblue"></div>' +
            '<label class="text">Homme</label>' +
            '<div>' +
            '<label class="text">' + homme5[j] + ' etudiants</label><br>' +
            '<label class="text blue">' + (homme5[j] * 100 / (homme5[j] + femme5[j])).toFixed(2) + '%</label>' +
            '</div>' +
            '</div>' +
            '<div class="info-colmal">' +
            '<div class="carrerose"></div>' +
            '<label class="text">Femme</label>' +
            '<div>' +
            '<label class="text">' + femme5[j] + ' etudiants</label><br>' +
            '<label class="text rose">' + (femme5[j] * 100 / (homme5[j] + femme5[j])).toFixed(2) + '%</label></div>' +
            '</div>' +
            '</div>' +
            '<div class="littlespace">' +
            '<label class="text gris">total : </label><label class="text">' + (homme5[j] + femme5[j]) + ' patients</label></div></div>' +
            '</div>';
        '</div>' +
            '</div>';
    }
    var digestive1 = document.getElementById('digestive').getContext('2d');
    var digestive2 = new Chart(digestive1, {
        type: 'bar',
        data: data5,
    });

    var name6 = [];
    var homme6 = [];
    var femme6 = [];
    for (var j = 0; j < maladie.length; j++) {
        const index = name6.indexOf(maladie[j].name);
        if (index == -1) {
            name5.push(maladie[j].name);
            if (maladie[j].sexe.toLowerCase() === 'femme') {
                homme6.push(0);
                femme6.push(maladie[j].occurence);
            }

            if (maladie[j].sexe.toLowerCase() === 'homme') {
                femme6.push(0);
                homme6.push(maladie[j].occurence);
            }
        }
        else {
            if (maladie[j].sexe.toLowerCase() === 'femme') {
                femme6[index] = maladie[j].occurence;
            }

            if (maladie[j].sexe.toLowerCase() === 'homme') {
                homme6[index] = maladie[j].occurence;
            }
        }
    }
    var divmaladie = document.getElementById('divmaladie');
    for (var j = 0; j < name6.length; j++) {
        divmaladie.innerHTML += '<div class="flex"><div class="info-colmal">' +
            '<div class="info-name littlespace"><label class="text name">' + name6[j] + '</label></div>' +
            '<div class="space">' +
            '<div class="info-colmal">' +
            '<div class="carreblue"></div>' +
            '<label class="text">Homme</label>' +
            '<div>' +
            '<label class="text">' + homme6[j] + ' etudiants</label><br>' +
            '<label class="text blue">' + (homme6[j] * 100 / (homme6[j] + femme6[j])).toFixed(2) + '%</label>' +
            '</div>' +
            '</div>' +
            '<div class="info-colmal">' +
            '<div class="carrerose"></div>' +
            '<label class="text">Femme</label>' +
            '<div>' +
            '<label class="text">' + femme6[j] + ' etudiants</label><br>' +
            '<label class="text rose">' + (femme6[j] * 100 / (homme6[j] + femme6[j])).toFixed(2) + '%</label></div>' +
            '</div>' +
            '</div>' +
            '<div class="littlespace">' +
            '<label class="text gris">total : </label><label class="text">' + (homme6[j] + femme6[j]) + ' patients</label></div></div>' +
            '</div>';
        '</div>' +
            '</div>';
    }
    let data6 = {
        labels: name6,
        datasets: [
            {
                label: 'Hemme',
                data: homme6,
                backgroundColor: "#004FD6"
            },
            {
                label: 'Femme',
                data: femme6,
                backgroundColor: "#ff02c0",
            }
        ]
    };
    var maladie1 = document.getElementById('maladie').getContext('2d');
    var maladie2 = new Chart(maladie1, {
        type: 'bar',
        data: data6,
    });
</script>

<script>
    function patient() {
        var etu = document.getElementById('etu').value;
        $.ajax({
            method: "POST",
            url: '/users/medecin/FiltreEtudiant',
            data: {
                "etu": etu,
            },
            success: function (result) {

                var total = result.femme + result.homme;
                if(etu == 'tous'){
                    document.getElementById('titrestatetu').innerHTML ='Statistique des etudiants ';
                }else{
                    document.getElementById('titrestatetu').innerHTML ='Statistique des etudiants du '+etu;
                }
                document.getElementById('path').innerHTML = result.homme + ' etudiants';
                document.getElementById('patf').innerHTML = result.femme + ' etudiants';
                document.getElementById('patt').innerHTML = total + ' etudiants';
                if (total == 0) {
                    document.getElementById('path%').innerHTML = total + '%';
                    document.getElementById('patf%').innerHTML = total + '%';
                } else {
                    document.getElementById('path%').innerHTML = (result.homme * 100 / total).toFixed(2) + '%';
                    document.getElementById('patf%').innerHTML = (result.femme * 100 / total).toFixed(2) + '%';
                }
                
                var patc = document.getElementById('pat').getContext('2d');

            pat2.data.datasets[0].data=[result.femme,result.homme];
            pat2.update();
            },
        });
    }

    function patientfiltre() {
        var patient = document.getElementById('patient').value;
        $.ajax({
            method: "POST",
            url: '/users/medecin/FiltrePatient',
            data: {
                "patient": patient,
            },
            success: function (result) {

                var total = result.femme + result.homme;
                if(patient == 'tous'){
                    document.getElementById('titrepat').innerHTML ='Statistique des patients ';
                    document.getElementById('patienth').innerHTML = result.homme + ' patients ' ;
                    document.getElementById('patientf').innerHTML = result.femme + ' patients' ;
                    document.getElementById('patientt').innerHTML = total + ' patients' ;
                }else{
                    document.getElementById('titrepat').innerHTML ='Statistique des '+patient;
                    document.getElementById('patienth').innerHTML = result.homme + ' ' +patient;
                    document.getElementById('patientf').innerHTML = result.femme + ' ' +patient;
                    document.getElementById('patientt').innerHTML = total + ' ' +patient;
                }
                if (total == 0) {
                    document.getElementById('patienth%').innerHTML = total + '%';
                    document.getElementById('patientf%').innerHTML = total + '%';
                } else {
                    document.getElementById('patienth%').innerHTML = (result.homme * 100 / total).toFixed(2) + '%';
                    document.getElementById('patientf%').innerHTML = (result.femme * 100 / total).toFixed(2) + '%';
                }

                patcp2.data.datasets[0].data=[result.homme,result.femme];
                patcp2.update();
            },
        });
    }

    function clickevacuation() {

        var duev = document.getElementById('duev').value;
        var auev = document.getElementById('auev').value;

        $.ajax({
            method: "POST",
            url: '/users/medecin/FiltreEvacuation',
            data: {
                "duev": duev,
                "auev": auev,
            },
            success: function (result) {

                var total = result.femme + result.homme;

                    document.getElementById('evh').innerHTML = result.homme + ' ' +'patients';
                    document.getElementById('evf').innerHTML = result.femme + ' ' +'patients';
                    document.getElementById('evt').innerHTML = total + ' ' +'patients';

                if (total == 0) {
                    document.getElementById('evh%').innerHTML = total + '%';
                    document.getElementById('evf%').innerHTML = total + '%';
                } else {
                    document.getElementById('evh%').innerHTML = (result.homme * 100 / total).toFixed(2) + '%';
                    document.getElementById('evf%').innerHTML = (result.femme * 100 / total).toFixed(2) + '%';
                }

                e2.data.datasets[0].data=[result.homme,result.femme];
                e2.update();
            },
        });
    }

    function clickregulier() {
        var dure = document.getElementById('dure').value;
        var aure = document.getElementById('aure').value;

        $.ajax({
            method: "POST",
            url: '/users/medecin/FiltreRegulier',
            data: {
                "dure": dure,
                "aure": aure,
            },
            success: function (result) {

                var total = result.femme + result.homme;

                    document.getElementById('reh').innerHTML = result.homme + ' ' +'patients';
                    document.getElementById('ref').innerHTML = result.femme + ' ' +'patients';
                    document.getElementById('ret').innerHTML = total + ' ' +'patients';

                if (total == 0) {
                    document.getElementById('reh%').innerHTML = total + '%';
                    document.getElementById('ref%').innerHTML = total + '%';
                } else {
                    document.getElementById('reh%').innerHTML = (result.homme * 100 / total).toFixed(2) + '%';
                    document.getElementById('ref%').innerHTML = (result.femme * 100 / total).toFixed(2) + '%';
                }

                rdvre2.data.datasets[0].data=[result.homme,result.femme];
                rdvre2.update();
            },
        });
    }

    function clickirregulier() {
        var duirre = document.getElementById('duirre').value;
        var auirre = document.getElementById('auirre').value;

        $.ajax({
            method: "POST",
            url: '/users/medecin/FiltreIrregulier',
            data: {
                "duirre": duirre,
                "auirre": auirre,
            },
            success: function (result) {

                var total = result.femme + result.homme;

                    document.getElementById('irreh').innerHTML = result.homme + ' ' +'patients';
                    document.getElementById('irref').innerHTML = result.femme + ' ' +'patients';
                    document.getElementById('irret').innerHTML = total + ' ' +'patients';

                if (total == 0) {
                    document.getElementById('irreh%').innerHTML = total + '%';
                    document.getElementById('irref%').innerHTML = total + '%';
                } else {
                    document.getElementById('irreh%').innerHTML = (result.homme * 100 / total).toFixed(2) + '%';
                    document.getElementById('irref%').innerHTML = (result.femme * 100 / total).toFixed(2) + '%';
                }

                rdvirre2.data.datasets[0].data=[result.homme,result.femme];
                rdvirre2.update();
            },
        });
    }

    function fumeurfiltre() {
        var fum = document.getElementById('fum').value;

        $.ajax({
            method: "POST",
            url: '/users/medecin/FiltreFumeur',
            data: {
                "fum": fum,
            },
            success: function (result) {

                var total = result.femme + result.homme;
                if(fum == 'fumeur'){
                    document.getElementById('titrefum').innerHTML ='Statistique des patients fumeurs';
                    document.getElementById('fuml').innerHTML ='fumeur';
                    document.getElementById('nofum').innerHTML ='non fumeur';
                }
                if(fum == 'chiqueur'){
                    document.getElementById('titrefum').innerHTML ='SStatistique des patients chiqueurs';
                    document.getElementById('fuml').innerHTML ='chiqueur';
                    document.getElementById('nofum').innerHTML ='non chiqueur';
                }
                if(fum == 'toxicomane'){
                    document.getElementById('titrefum').innerHTML ='Statistique des patients toxicomanes';
                    document.getElementById('fuml').innerHTML ='toxicomane';
                    document.getElementById('nofum').innerHTML ='non toxicomane';
                }
                if(fum == 'ancien'){
                    document.getElementById('titrefum').innerHTML ='Statistique des patients anciens fumeurs';
                    document.getElementById('fuml').innerHTML ='fumeur';
                    document.getElementById('nofum').innerHTML ='non fumeur';
                }
                if(fum == 'alcoolique'){
                    document.getElementById('titrefum').innerHTML ='Statistique des patients alcooliques';
                    document.getElementById('fuml').innerHTML ='alcoolique';
                    document.getElementById('nofum').innerHTML ='non alcoolique';
                }
                
                document.getElementById('fumc').innerHTML = result.homme + ' etudiants';
                document.getElementById('nofumc').innerHTML = result.femme + ' etudiants';
                document.getElementById('fumt').innerHTML = total + ' etudiants';
                if (total == 0) {
                    document.getElementById('fumc%').innerHTML = total + '%';
                    document.getElementById('nofumc%').innerHTML = total + '%';
                } else {
                    document.getElementById('fumc%').innerHTML = (result.homme * 100 / total).toFixed(2) + '%';
                    document.getElementById('nofumc%').innerHTML = (result.femme * 100 / total).toFixed(2) + '%';
                }

                myChart.data.datasets[0].data=[result.homme,result.femme];
                myChart.update();
            },
        });
    }

function deconnecter(){
    var etu = document.getElementById('cnx').value;
        $.ajax({
            method: "POST",
            url: '/users/logout',
        })
}
</script>

</html>